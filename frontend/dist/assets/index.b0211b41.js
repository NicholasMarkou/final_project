var L=Object.defineProperty,T=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var x=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))D.call(t,o)&&x(e,o,t[o]);if(y)for(var o of y(t))E.call(t,o)&&x(e,o,t[o]);return e},k=(e,t)=>T(e,N(t));import{o as l,c as a,a as s,w as B,v as O,m,F as $,r as f,t as d,b,d as U,e as _,f as S,g as P,h as v,i as F,j as V,V as j}from"./vendor.a93ceed0.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};z();var g=(e,t)=>{for(const[o,c]of t)e[o]=c;return e};const A={name:"Login",data:function(){return{username:""}},methods:{login(){this.$socket.emit("login",this.username)}}},M=s("h2",{class:"text-center"},"Login",-1),q={class:"input-group input-group-lg"},G=s("span",{class:"input-group-text",id:"inputGroup-sizing-lg"},"Name",-1);function W(e,t,o,c,n,r){return l(),a("div",null,[M,s("div",q,[G,B(s("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>e.username=i),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg"},null,512),[[O,e.username]])]),s("button",{onClick:t[1]||(t[1]=(...i)=>r.login&&r.login(...i)),type:"button",class:"btn btn-primary mt-1 w-100"},"Login")])}var H=g(A,[["render",W]]);const K={name:"Scores",computed:p({},m(["scores"]))},Q=s("h2",{class:"text-center"},"Live Scores",-1),R={key:0,class:"list-group text-center"},J={class:"row"},X={class:"col-6"},Y={class:"col-6"},Z={key:1},ee=s("p",null,"No logged in users are live right now. Why not be the first?",-1),te=[ee];function se(e,t,o,c,n,r){return l(),a("div",null,[Q,e.scores.length>0?(l(),a("ul",R,[(l(!0),a($,null,f(e.scores,i=>(l(),a("li",{key:i,class:"list-group-item align-items-center"},[s("div",J,[s("div",X,d(i.username),1),s("div",Y,"$ "+d(i.score),1)])]))),128))])):(l(),a("div",Z,te))])}var re=g(K,[["render",se]]),oe="/assets/wpi-logo.e116f41b.png";const ne={name:"Clicker",computed:p({},m(["score","scorePerTick","scorePerClick"])),methods:p({},b(["incrementScore"]))},ce={class:"text-center"},ie=s("br",null,null,-1),le=s("img",{src:oe},null,-1),ae=[le];function de(e,t,o,c,n,r){return l(),a("div",ce,[s("h2",null,"$ "+d(e.score),1),s("h4",null,d(e.scorePerTick)+" $/sec",1),ie,s("button",{onClick:t[0]||(t[0]=(...i)=>e.incrementScore&&e.incrementScore(...i)),type:"button",class:"btn btn-light btn-default rounded-circle"},ae),s("h4",null,"+ $ "+d(e.scorePerClick),1)])}var ue=g(ne,[["render",de]]);function C(e,t){return(e*Math.pow(1.15,t)).toFixed()}const pe={name:"ProductionUpgrade",props:{index:{type:Number,required:!0}},computed:k(p({},m(["score","productionUpgradeStats","productionUpgradeLevels"])),{stats(){return this.productionUpgradeStats[this.index]||{}},level(){return this.productionUpgradeLevels[this.index]},upgradeCost(){return C(this.stats.baseCost,this.level)},upgradeInfo(){return{type:"production",index:this.index}},buttonText(){return`Hire ${this.stats.unit} ($${this.upgradeCost})`},canUpgrade(){return this.score>=this.upgradeCost}}),methods:p({},b(["applyUpgrade"]))},ge={class:"list-group-item align-items-center"},me={class:"row"},_e={class:"col-6"},he=s("br",null,null,-1),ke={class:"badge bg-danger rounded-pill col-10"},be=s("br",null,null,-1),ve={class:"badge bg-danger rounded-pill col-10"},$e=s("br",null,null,-1),fe=["disabled"],Ce={class:"col-6"},we=["src"];function ye(e,t,o,c,n,r){return l(),a("li",ge,[s("div",me,[s("div",_e,[U(d(r.stats.name)+" ",1),he,s("span",ke,"Level "+d(r.level),1),be,s("span",ve,"Power: $ "+d(r.stats.power)+"/sec",1),$e,s("button",{onClick:t[0]||(t[0]=i=>e.applyUpgrade(r.upgradeInfo)),disabled:!r.canUpgrade,class:"btn btn-danger col-12"},d(r.buttonText),9,fe)]),s("div",Ce,[s("img",{src:r.stats.src,class:"img-fluid img-rounded"},null,8,we)])])])}var xe=g(pe,[["render",ye]]);const Ue={name:"ClickUpgrade",props:{index:{type:Number,required:!0}},computed:k(p({},m(["score","clickUpgradeStats","clickUpgradeLevels"])),{stats(){return this.clickUpgradeStats[this.index]||{}},level(){return this.clickUpgradeLevels[this.index]},upgradeCost(){return C(this.stats.baseCost,this.level)},upgradeInfo(){return{type:"click",index:this.index}},buttonText(){return`Buy ($${this.upgradeCost})`},canUpgrade(){return this.score>=this.upgradeCost}}),methods:p({},b(["applyUpgrade"]))},Se={class:"list-group-item align-items-center"},Pe={class:"row"},Ie={class:"col-6"},Le=s("br",null,null,-1),Te={class:"badge bg-danger rounded-pill col-10"},Ne=s("br",null,null,-1),De={class:"badge bg-danger rounded-pill col-10"},Ee=s("br",null,null,-1),Be=["disabled"],Oe={class:"col-6"},Fe=["src"];function Ve(e,t,o,c,n,r){return l(),a("li",Se,[s("div",Pe,[s("div",Ie,[U(d(r.stats.name)+" ",1),Le,s("span",Te,"Level "+d(r.level),1),Ne,s("span",De,"Power: $ "+d(r.stats.power)+"/click",1),Ee,s("button",{onClick:t[0]||(t[0]=i=>e.applyUpgrade(r.upgradeInfo)),disabled:!r.canUpgrade,class:"btn btn-danger col-12"},d(r.buttonText),9,Be)]),s("div",Oe,[s("img",{src:r.stats.src,class:"img-fluid img-rounded"},null,8,Fe)])])])}var je=g(Ue,[["render",Ve]]);const ze={name:"Upgrades",components:{ProductionUpgrade:xe,ClickUpgrade:je},computed:p({},m(["upgradeCount"])),data:function(){return{showProduction:!0}}},Ae={class:"text-center"},Me=s("h2",{class:"text-center"},"Upgrades",-1),qe={key:0},Ge=s("h4",null,"Production Upgrades",-1),We={key:0,class:"list-group"},He={key:1},Ke=s("h4",null,"Click Upgrades",-1),Qe={key:0,class:"list-group"};function Re(e,t,o,c,n,r){const i=_("production-upgrade"),h=_("click-upgrade");return l(),a("div",null,[s("div",Ae,[Me,s("button",{onClick:t[0]||(t[0]=u=>e.showProduction=!0),class:"btn btn-danger btn-sm col-5 m-1"},"Production Upgrades"),s("button",{onClick:t[1]||(t[1]=u=>e.showProduction=!1),class:"btn btn-danger btn-sm col-5 m-1"},"Click Upgrades")]),e.showProduction?(l(),a("div",qe,[Ge,e.upgradeCount.production>0?(l(),a("ul",We,[(l(!0),a($,null,f(e.upgradeCount.production,u=>(l(),P(i,{key:u,index:u-1},null,8,["index"]))),128))])):S("",!0)])):(l(),a("div",He,[Ke,e.upgradeCount.click>0?(l(),a("ul",Qe,[(l(!0),a($,null,f(e.upgradeCount.click,u=>(l(),P(h,{key:u,index:u-1},null,8,["index"]))),128))])):S("",!0)]))])}var Je=g(ze,[["render",Re]]);const Xe={name:"App",components:{Login:H,Scores:re,Clicker:ue,Upgrades:Je},computed:p({},m(["user"])),data:function(){return{tickIntervalID:null,updateIntervalID:null}},mounted:function(){this.$store.commit("initializeState"),this.tickIntervalID=setInterval(this.runProductionTick,1e3),this.updateIntervalID=setInterval(this.updateBackend,1e4)},beforeUnmount:function(){clearInterval(this.tickIntervalID),clearInterval(this.updateIntervalID)},sockets:{updateScores:function(e){console.log("scores update received!",e),this.$store.commit("updateScores",e)},login:function(e){console.log("login data received",e);let t={score:e.currScore,user:{production:e.prodUpgrades,click:e.clickUpgrades}};this.$store.commit("login",t)}},methods:k(p({},b(["runProductionTick"])),{updateBackend(){this.$socket.emit("update",this.user)}})},Ye={id:"wrapper",class:"container-fluid col-8"},Ze=s("div",{class:"row border border-3 border-danger rounded"},[s("h1",{class:"text-center"},"WPI Clicker")],-1),et=s("br",null,null,-1),tt={class:"row"},st={class:"col-md-4"},rt=s("br",null,null,-1);function ot(e,t,o,c,n,r){const i=_("Login"),h=_("Scores"),u=_("Clicker"),I=_("Upgrades");return l(),a("div",Ye,[Ze,et,s("div",tt,[s("div",st,[v(i),rt,v(h)]),v(u,{class:"col-md-4"}),v(I,{class:"col-md-4"})])])}var nt=g(Xe,[["render",ot]]);const ct=[{index:0,name:"Fuller Labs",baseCost:10,unit:"CS Major",power:1,src:"/fuller-lab.png"},{index:1,name:"Campus Center",baseCost:1e3,unit:"Chartwells Employee",power:9,src:"/campus-center.png"},{index:2,name:"Innovation Studio",baseCost:1e4,unit:"Innovator",power:50,src:"/innovation-studio.png"},{index:3,name:"Smart World",baseCost:1e5,unit:"Researcher",power:280,src:"/smart-world.png"},{index:4,name:"Freshman Skyscraper",baseCost:1e6,unit:"Freshman",power:1800,src:"/freshman-skyscraper.png"}],it=[{index:0,name:"Daka Cookies",baseCost:50,power:2,src:"/cookie.png"},{index:1,name:"Starbucks Coffee",baseCost:500,power:4,src:"/starbucks-cup.png"},{index:2,name:"Gompei Statue",baseCost:5e3,power:30,src:"/gompei-statue.png"},{index:3,name:"Early Decision Students",baseCost:1e5,power:550,src:"/wpi-logo.png"},{index:4,name:"Extended Breaks",baseCost:5e5,power:2e3,src:"/extended-break.png"},{index:5,name:"Summer Courses",baseCost:1e6,power:5e3,src:"/summer-courses.png"},{index:6,name:"Underloaded Terms",baseCost:1e7,power:45e3,src:"/underload.png"},{index:7,name:"Off Campus IQP",baseCost:1e9,power:6e6,src:"/iqp.png"}];var lt={production:ct,click:it},at=F({state:{score:0,scorePerTick:0,scorePerClick:0,stats:{production:[],click:[]},user:{production:{},click:{}},scores:[]},getters:{score(e){return e.score},user(e){let t=e.user;return t.score=e.score,t},scores(e){return e.scores},scorePerTick(e){return e.scorePerTick},scorePerClick(e){return e.scorePerClick},upgradeCount(e){return{production:e.stats.production.length,click:e.stats.click.length}},productionUpgradeStats(e){return e.stats.production},productionUpgradeLevels(e){return e.user.production},clickUpgradeStats(e){return e.stats.click},clickUpgradeLevels(e){return e.user.click}},mutations:{initializeState(e){e.stats=lt,e.stats.production.sort((t,o)=>t.index-o.index),e.stats.production.forEach(t=>{e.user.production[t.index]=0}),e.stats.click.sort((t,o)=>t.index-o.index),e.stats.click.forEach(t=>{e.user.click[t.index]=0})},login(e,t){e.score=t.score,e.user=t.user},updateScores(e,t){e.scores=t},runProductionTick(e){let t=0;Object.keys(e.user.production).forEach(o=>{let c=parseInt(o),n=e.user.production[c],r=e.stats.production[c].power;t+=n*r}),e.scorePerTick=t,e.score+=t},incrementScore(e){let t=1;Object.keys(e.user.click).forEach(o=>{let c=parseInt(o),n=e.user.click[c],r=e.stats.click[c].power;t+=n*r}),e.scorePerClick=t,e.score+=t},applyUpgrade(e,t){let{type:o,index:c}=t,n=e.stats[o][c],r=e.user[o],i=n.baseCost,h=r[c],u=C(i,h);u<=e.score&&(e.user[o][c]++,e.score-=u)}}});const w=V(nt);w.use(at);w.use(new j({debug:!0,connection:"https://web-ware-final.herokuapp.com"}));w.mount("#app");
